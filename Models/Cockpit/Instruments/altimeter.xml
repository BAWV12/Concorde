<?xml version="1.0"?>
<PropertyList>
  <path>../Models/altimeter.ac</path>
  <params>
    <altitude>instrumentation/altimeter[0]/indicated-altitude-ft</altitude>
    <setting-inhg>instrumentation/altimeter-adc[0]/setting-inhg</setting-inhg>
    <setting-hpa>instrumentation/altimeter-adc[0]/setting-hpa</setting-hpa>
    <failure-flag>/instrumentation/altimeter[0]/warning-flag</failure-flag>
    <serviceable>/instrumentation/altimeter[0]/serviceable</serviceable>
    <standby-ctrl>/instrumentation/altimeter[0]/standby</standby-ctrl>
  </params>

<effect>
	   <inherits-from>Aircraft/Concorde/Models/Effects/interior</inherits-from>
	   <object-name>Frame</object-name>
    <object-name>Adjust</object-name>
</effect>

<effect>
   <inherits-from>Aircraft/Concorde/Models/Effects/flash</inherits-from>
    <object-name>alt10000</object-name>
    <object-name>alt1000</object-name>
    <object-name>alt100</object-name>
    <object-name>alt10</object-name>
    <object-name>inhg1</object-name>
    <object-name>inhg2</object-name>
    <object-name>inhg3</object-name>
    <object-name>inhg4</object-name>
    <object-name>mbar1</object-name>
    <object-name>mbar2</object-name>
    <object-name>mbar3</object-name>
    <object-name>mbar4</object-name>
    <object-name>Guage</object-name>
    <object-name>AltNeedle</object-name>
    <object-name>Adjust.001</object-name>
    <object-name>FF</object-name>
</effect>

  <animation>
    <type>select</type>
    <object-name>FF</object-name>
    <condition>
      <or>
	<not><property alias="/params/serviceable"/></not>
	<property alias="/params/standby-ctrl"/>
	<property alias="/params/failure-flag"/>
        <less-than>
          <property>/systems/electrical/outputs/specific</property>
          <value>20.0</value>
        </less-than>
      </or>
    </condition>    
  </animation>


  <animation>
    <type>rotate</type>
    <object-name>Adjust</object-name>
    <object-name>Adjust.001</object-name>
        <property alias="/params/setting-inhg"/>
    <factor>1000</factor>
    <center>
      <x-m>0.00992</x-m>
      <y-m>-0.02888</y-m>
      <z-m>-0.02791</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>



  <animation>
    <condition>
      <not>
      <or>
	<not><property alias="/params/serviceable"/></not>
	<property alias="/params/standby-ctrl"/>
	<property alias="/params/failure-flag"/>
        <less-than>
          <property>/systems/electrical/outputs/specific</property>
          <value>20.0</value>
        </less-than>
      </or>
      </not>
    </condition>    

    <type>rotate</type>
    <object-name>AltNeedle</object-name>
    <property alias="/params/altitude"/>
    <factor>.36</factor>
    <center>
      <x-m>0</x-m>
      <y-m>0</y-m>
      <z-m>0</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>
  <!-- ALTIMETER ALTITUDE MATHS -->
  <animation>
    <type>rotate</type>
    <object-name>alt10000</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <property alias="/params/altitude"/>
              <value>10000</value>
            </div>
          </floor>
          <max>
            <div>
              <difference>
                <property alias="/params/altitude"/>
                <value>9980</value>
                <prod>
                  <floor>
                    <div>
                      <property alias="/params/altitude"/>
                      <value>10000</value>
                    </div>
                  </floor>
                  <value>10000</value>
                </prod>
              </difference>
              <value>20</value>
            </div>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.01688</x-m>
      <y-m>-0.01447</y-m>
      <z-m>0.0041</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>alt1000</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <abs>
                <property alias="/params/altitude"/>
              </abs>
              <value>1000</value>
            </div>
          </floor>
          <max>
            <div>
              <difference>
                <abs>
                  <property alias="/params/altitude"/>
                </abs>
                <value>980</value>
                <prod>
                  <floor>
                    <div>
                      <abs>
                        <property alias="/params/altitude"/>
                      </abs>
                      <value>1000</value>
                    </div>
                  </floor>
                  <value>1000</value>
                </prod>
              </difference>
              <value>20</value>
            </div>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.01688</x-m>
      <y-m>-0.08474</y-m>
      <z-m>0.0041</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>alt100</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <abs>
                <property alias="/params/altitude"/>
              </abs>
              <value>100</value>
            </div>
          </floor>
          <max>
            <div>
              <difference>
                <abs>
                  <property alias="/params/altitude"/>
                </abs>
                <value>80</value>
                <prod>
                  <floor>
                    <div>
                      <abs>
                        <property alias="/params/altitude"/>
                      </abs>
                      <value>100</value>
                    </div>
                  </floor>
                  <value>100</value>
                </prod>
              </difference>
              <value>20</value>
            </div>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.01688</x-m>
      <y-m>0.003776</y-m>
      <z-m>0.0041</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>alt10</object-name>
    <expression>
      <prod>
        <abs>
          <property alias="/params/altitude"/>
        </abs>
        <value>3.6</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.006883</x-m>
      <y-m>0.01178</y-m>
      <z-m>0.0041</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <!-- ALTIMETER inHg MATHS -->
  <animation>
    <type>rotate</type>
    <object-name>inhg1</object-name>
    <expression>
      <prod>
        <floor>
          <div>
            <property alias="/params/setting-inhg"/>
            <value>10</value>
          </div>
        </floor>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.014</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>inhg2</object-name>
    <expression>
      <prod>
        <floor>
          <property alias="/params/setting-inhg"/>
        </floor>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.0115</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>inhg3</object-name>
    <expression>
      <prod>
        <floor>
          <prod>
            <property alias="/params/setting-inhg"/>
            <value>10</value>
          </prod>
        </floor>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.09</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>inhg4</object-name>
    <property alias="/params/setting-inhg"/>
    <factor>3600</factor>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.0065</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <!-- ALTIMETER mBar MATHS -->
  <animation>
    <type>rotate</type>
    <object-name>mbar1</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <property alias="/params/setting-hpa"/>
              <value>1000</value>
            </div>
          </floor>
          <max>
            <difference>
              <property alias="/params/setting-hpa"/>
              <value>999</value>
              <prod>
                <floor>
                  <div>
                    <property alias="/params/setting-hpa"/>
                    <value>1000</value>
                  </div>
                </floor>
                <value>1000</value>
              </prod>
            </difference>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.05958</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>mbar2</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <property alias="/params/setting-hpa"/>
              <value>100</value>
            </div>
          </floor>
          <max>
            <difference>
              <property alias="/params/setting-hpa"/>
              <value>99</value>
              <prod>
                <floor>
                  <div>
                    <property alias="/params/setting-hpa"/>
                    <value>100</value>
                  </div>
                </floor>
                <value>100</value>
              </prod>
            </difference>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.008458</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>mbar3</object-name>
    <expression>
      <prod>
        <sum>
          <floor>
            <div>
              <property alias="/params/setting-hpa"/>
              <value>10</value>
            </div>
          </floor>
          <max>
            <difference>
              <property alias="/params/setting-hpa"/>
              <value>9</value>
              <prod>
                <floor>
                  <div>
                    <property alias="/params/setting-hpa"/>
                    <value>10</value>
                  </div>
                </floor>
                <value>10</value>
              </prod>
            </difference>
            <value>0</value>
          </max>
        </sum>
        <value>36</value>
      </prod>
    </expression>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.01096</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>rotate</type>
    <object-name>mbar4</object-name>
    <property alias="/params/setting-hpa"/>
    <factor>36</factor>
    <center>
      <x-m>-0.0076</x-m>
      <y-m>-0.01346</y-m>
      <z-m>-0.019</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>


 <!-- Stand By switch -->

  <animation>
    <type>rotate</type>
    <object-name>stdbsw</object-name>
    <property alias="/params/standby-ctrl"/>
    <factor>160</factor>
    <center>
      <x-m>0.010075</x-m>
      <y-m>0.029982</y-m>
      <z-m>-0.027872</z-m>
    </center>
    <axis>
      <x>1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>pick</type>
    <object-name>stdbsw</object-name>
    <action>
      <name>StandBy switch</name>
      <button>0</button>
      <repeatable>true</repeatable>
   	<binding>
    		<command>property-toggle</command>
    		<property alias="/params/standby-ctrl"/>
   	</binding>
    </action>
  </animation>



  <!-- Adjustment wheel -->
  <animation>
    <type>pick</type>
    <object-name>Adjust</object-name>
    <action>
      <name>Altimeter Adjust Reset</name>
      <button>1</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-assign</command>
        <property alias="/params/setting-inhg"/>
        <value>29.92</value>
      </binding>
    </action>
    <action>
      <name>Altimeter Adjust Up</name>
      <button>3</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property alias="/params/setting-inhg"/>
        <step>.01</step>
        <min>0</min>
        <max>100</max>
        <wrap>false</wrap>
      </binding>
    </action>
    <action>
      <name>Altimeter Adjust Down</name>
      <button>4</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-adjust</command>
        <property alias="/params/setting-inhg"/>
        <step>-.01</step>
        <min>0</min>
        <max>100</max>
        <wrap>false</wrap>
      </binding>
    </action>
  </animation>
  <!--Default Lighting-->
  <animation>
    <type>material</type>
    <object-name>alt10000</object-name>
    <object-name>alt1000</object-name>
    <object-name>alt100</object-name>
    <object-name>alt10</object-name>
    <object-name>inhg1</object-name>
    <object-name>inhg2</object-name>
    <object-name>inhg3</object-name>
    <object-name>inhg4</object-name>
    <object-name>mbar1</object-name>
    <object-name>mbar2</object-name>
    <object-name>mbar3</object-name>
    <object-name>mbar4</object-name>
    <object-name>Guage</object-name>
    <object-name>AltNeedle</object-name>
    <object-name>Adjust.001</object-name>
    <object-name>FF</object-name>
  <condition>
  <and>
    <property>controls/lighting/instrument-lights</property>
        <greater-than>
          <property>/systems/electrical/outputs/specific</property>
          <value>20.0</value>
        </greater-than>
  </and>
  </condition>
  <emission>
   <red>0.7</red>
   <green>0.2</green>
   <blue>0.2</blue>
   <factor-prop>/controls/lighting/instruments-norm</factor-prop>
  </emission>
  </animation>
  <animation>
    <type>material</type>
    <object-name>Frame</object-name>
  <emission>
     <red>0.2</red>
     <green>0.2</green>
     <blue>0.2</blue>
  </emission>
 </animation>

</PropertyList>
