<?xml version="1.0"?>
<PropertyList>
  <path>../Models/switch_compassl.ac</path>

<effect>
    <inherits-from>Aircraft/Concorde/Models/Effects/interior</inherits-from>
    <object-name>Nut</object-name>
    <object-name>Ball</object-name>
    <object-name>Switch</object-name>

    <object-name>Nut.001</object-name>
    <object-name>Ball.001</object-name>
    <object-name>Switch.001</object-name>

    <object-name>Knob</object-name>
    <object-name>Knob.001</object-name>
    <object-name>Knob.002</object-name>
    <object-name>Knob.003</object-name>

    <object-name>Plane</object-name>
    <object-name>Plane.001</object-name>
    <object-name>Plane.002</object-name>
    <object-name>Plane.003</object-name>
</effect>

  <animation>
    <type>rotate</type>
    <object-name>Switch</object-name>
    <property>/controls/lighting/crew/overhead/compass-norm</property>
    <interpolation>
      <entry>
        <ind>0</ind>
        <dep>-35</dep>
      </entry>
      <entry>
        <ind>1</ind>
        <dep>35</dep>
      </entry>
    </interpolation>
    <center>
      <x-m>0</x-m>
      <y-m>0</y-m>
      <z-m>0</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>-1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>pick</type>
    <object-name>Switch</object-name>
    <action>
      <name>Captain Light Switch</name>
      <button>0</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-toggle</command>
        <property>/controls/lighting/crew/overhead/compass-norm</property>
        <step>1</step>
        <min>0</min>
        <max>1</max>
        <wrap>true</wrap>
      </binding>
      <binding>
        <command>nasal</command>
        <script>globals.Concorde.lightingsystem.compassexport( 1.0 );</script>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>/instrumentation/generic/click</property>
      </binding>
    </action>
  </animation>

  <animation>
    <type>rotate</type>
    <object-name>Knob.002</object-name>
    <property>/controls/lighting/instrument-lights</property>
    <interpolation>
      <entry>
        <ind>0</ind>
        <dep>-30</dep>
      </entry>
      <entry>
        <ind>1</ind>
        <dep>30</dep>
      </entry>
    </interpolation>
    <center>
      <x-m>0.00778</x-m>
      <y-m>0.00005</y-m>
      <z-m>0.10269</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>pick</type>
    <object-name>Knob.002</object-name>
    <action>
      <name>Captain Light Switch</name>
      <button>0</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-toggle</command>
        <property>/controls/lighting/instrument-lights</property>
        <step>1</step>
        <min>0</min>
        <max>1</max>
        <wrap>true</wrap>
      </binding>
      <binding>
        <command>nasal</command>	
     	<script>
	  instrlight=getprop("controls/lighting/instrument-lights");
	  if (instrlight='false') {
		setprop("sim/rendering/als-secondary-lights/lightspot/lightspot-r",instrlight);
		setprop("sim/rendering/als-secondary-lights/lightspot/lightspot-r[1]",instrlight);
	  };
     	</script>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>/instrumentation/generic/click</property>
      </binding>
    </action>
  </animation>


  <animation>
    <type>pick</type>
    <object-name>Knob</object-name>
    <action>
      <name>Up</name>
      <button>3</button>
      <repeatable>false</repeatable>
      <binding>
	<condition>
          <property>/controls/lighting/instrument-lights</property>	  
	</condition>
        <command>property-adjust</command>
        <property>sim/rendering/als-secondary-lights/lightspot/lightspot-r[1]</property>
        <step>0.2</step>
        <min>0</min>
        <max>1</max>
        <wrap>false</wrap>
      </binding>
    </action>
    <action>
      <name>Dwn</name>
      <button>4</button>
      <repeatable>false</repeatable>
      <binding>
	<condition>
          <property>/controls/lighting/instrument-lights</property>	  
	</condition>
        <command>property-adjust</command>
        <property>sim/rendering/als-secondary-lights/lightspot/lightspot-r[1]</property>
        <step>-0.2</step>
        <min>0</min>
        <max>1</max>
        <wrap>false</wrap>
      </binding>
    </action>
    </animation>

  <animation>
    <type>rotate</type>
    <object-name>Knob</object-name>
    <property>sim/rendering/als-secondary-lights/lightspot/lightspot-r[1]</property>
    <interpolation>
      <entry>
        <ind>0</ind>
        <dep>-155</dep>
      </entry>
      <entry>
        <ind>1</ind>
        <dep>155</dep>
      </entry>
    </interpolation>
    <center>
      <x-m>0.00778</x-m>
      <y-m>0.00005</y-m>
      <z-m>0.05759</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
  </animation>


  <animation>
    <type>rotate</type>
    <object-name>Switch.001</object-name>
    <property>/controls/lighting/crew/captain/test</property>
    <interpolation>
      <entry>
        <ind>0</ind>
        <dep>-35</dep>
      </entry>
      <entry>
        <ind>1</ind>
        <dep>35</dep>
      </entry>
    </interpolation>
    <center>
      <x-m>0.0015</x-m>
      <y-m>0</y-m>
      <z-m>-0.04257</z-m>
    </center>
    <axis>
      <x>0</x>
      <y>-1</y>
      <z>0</z>
    </axis>
  </animation>
  <animation>
    <type>pick</type>
    <object-name>Switch.001</object-name>
    <action>
      <name>Captain Light Switch</name>
      <button>0</button>
      <repeatable>false</repeatable>
      <binding>
        <command>property-toggle</command>
        <property>/controls/lighting/crew/captain/test</property>
        <step>1</step>
        <min>0</min>
        <max>1</max>
        <wrap>true</wrap>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>/controls/lighting/crew/copilot/test</property>
        <step>1</step>
        <min>0</min>
        <max>1</max>
        <wrap>true</wrap>
      </binding>
      <binding>
        <command>property-toggle</command>
        <property>/controls/lighting/crew/center/test</property>
        <step>1</step>
        <min>0</min>
        <max>1</max>
        <wrap>true</wrap>
      </binding>

      <binding>
        <command>property-toggle</command>
        <property>/instrumentation/generic/click</property>
      </binding>
    </action>
  </animation>


<!-- Default lighting -->
  <animation>
    <type>material</type>
    <object-name>Knob.001</object-name>
    <object-name>Knob.003</object-name>
  <condition>
  <and>
    <property>controls/lighting/instrument-lights</property>
        <greater-than>
          <property>/systems/electrical/outputs/specific</property>
          <value>20.0</value>
        </greater-than>

  </and>
  </condition>
  <emission>
   <red>0.7</red>
   <green>0.2</green>
   <blue>0.2</blue>
   <factor-prop>/controls/lighting/instruments-norm</factor-prop>
  </emission>
  </animation>


</PropertyList>
